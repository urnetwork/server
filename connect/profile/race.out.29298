==================
WARNING: DATA RACE
Write at 0x00c0010d7090 by goroutine 163704:
  runtime.recvDirect()
      /usr/local/go/src/runtime/chan.go:348 +0x7c
  bringyour.com/service/connect.(*ResidentTransport).Close()
      /Users/brien/bringyour/bringyour/connect/resident.go:1289 +0xcc
  bringyour.com/service/connect.(*ConnectHandler).Connect.func1.2()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:187 +0xa4
  bringyour.com/bringyour/model.NominateResident()
      /Users/brien/bringyour/bringyour/bringyour/model/network_client_model.go:997 +0xdc
  bringyour.com/service/connect.(*Exchange).NominateLocalResident()
      /Users/brien/bringyour/bringyour/connect/resident.go:285 +0x390
  bringyour.com/service/connect.(*ResidentTransport).Run.func4()
      /Users/brien/bringyour/bringyour/connect/resident.go:1262 +0x94
  bringyour.com/service/connect.(*ResidentTransport).Run.TraceWithReturn[go.shape.bool].func6()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:117 +0x40
  bringyour.com/bringyour.trace()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:136 +0x1a0
  bringyour.com/bringyour.TraceWithReturn[go.shape.bool]()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:116 +0x1dc
  bringyour.com/service/connect.(*ResidentTransport).Run()
      /Users/brien/bringyour/bringyour/connect/resident.go:1259 +0x174
  bringyour.com/service/connect.(*ResidentTransport).Run-fm()
      <autogenerated>:1 +0x34
  bringyour.com/bringyour.HandleError()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:66 +0xa8
  bringyour.com/service/connect.(*ConnectHandler).Connect.func1.2()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:186 +0x8c

Previous read at 0x00c0010d7090 by goroutine 163705:
  runtime.chansend1()
      /usr/local/go/src/runtime/chan.go:146 +0x2c
  bringyour.com/service/connect.(*ConnectHandler).Connect.func1.3()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:225 +0x2a4
  bringyour.com/bringyour.HandleError()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:66 +0xa8
  bringyour.com/service/connect.(*ConnectHandler).Connect.func1.gowrap3()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:191 +0x6c

Goroutine 163704 (running) created at:
  bringyour.com/service/connect.(*ConnectHandler).Connect.func1()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:184 +0x41c
  bringyour.com/service/connect.(*ConnectHandler).Connect.Trace.func2()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:109 +0x30
  bringyour.com/bringyour.trace()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:136 +0x1a0
  bringyour.com/bringyour.Trace()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:108 +0x99c
  bringyour.com/service/connect.(*ConnectHandler).Connect()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:153 +0x844
  bringyour.com/service/connect.(*ConnectHandler).Connect-fm()
      <autogenerated>:1 +0x4c
  bringyour.com/bringyour/router.(*Router).ServeHTTP.func1()
      /Users/brien/bringyour/bringyour/bringyour/router/router.go:77 +0x178
  bringyour.com/bringyour/router.(*Router).ServeHTTP()
      /Users/brien/bringyour/bringyour/bringyour/router/router.go:78 +0x2d0
  net/http.serverHandler.ServeHTTP()
      /usr/local/go/src/net/http/server.go:3137 +0x298
  net/http.(*conn).serve()
      /usr/local/go/src/net/http/server.go:2039 +0xf28
  net/http.(*Server).Serve.gowrap3()
      /usr/local/go/src/net/http/server.go:3285 +0x4c

Goroutine 163705 (running) created at:
  bringyour.com/service/connect.(*ConnectHandler).Connect.func1()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:191 +0x644
  bringyour.com/service/connect.(*ConnectHandler).Connect.Trace.func2()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:109 +0x30
  bringyour.com/bringyour.trace()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:136 +0x1a0
  bringyour.com/bringyour.Trace()
      /Users/brien/bringyour/bringyour/bringyour/trace.go:108 +0x99c
  bringyour.com/service/connect.(*ConnectHandler).Connect()
      /Users/brien/bringyour/bringyour/connect/connect_handler.go:153 +0x844
  bringyour.com/service/connect.(*ConnectHandler).Connect-fm()
      <autogenerated>:1 +0x4c
  bringyour.com/bringyour/router.(*Router).ServeHTTP.func1()
      /Users/brien/bringyour/bringyour/bringyour/router/router.go:77 +0x178
  bringyour.com/bringyour/router.(*Router).ServeHTTP()
      /Users/brien/bringyour/bringyour/bringyour/router/router.go:78 +0x2d0
  net/http.serverHandler.ServeHTTP()
      /usr/local/go/src/net/http/server.go:3137 +0x298
  net/http.(*conn).serve()
      /usr/local/go/src/net/http/server.go:2039 +0xf28
  net/http.(*Server).Serve.gowrap3()
      /usr/local/go/src/net/http/server.go:3285 +0x4c
==================
